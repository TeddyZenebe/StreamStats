<div class="scrollable sidebar-content">
    <div class="scrollable-content">
        <div class="list-group">
            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 1  ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(1)" >Select a State / Region<h5 ng-show="vm.regionService.selectedRegion.Name"><strong>{{vm.regionService.selectedRegion.Name}}</strong></h5><i ng-class="vm.selectedProcedure == 1 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-hide="vm.selectedProcedure != 1">
                    <p><strong>Start Here</strong><p>
                    <p>To begin, a state or regional study area needs to be selected.  This can be accomplished in the following ways:</p>
                    <ul>
                        <li>Click a state or region on the map</li>
                        <li>Zoom using the map until state and regional study areas are displayed below</li>
                        <li>Use the search box to zoom to an area of interest, then select a search option from the list</li>
                    </ul>

                    <input type="text" class="form-control"
                            ng-model="selection"
                            typeahead="loc as loc.Name +'(' + loc.State +')' for loc in vm.getLocations($viewValue)"
                            typeahead-loading="loadingLocations"
                            typeahead-wait-ms="100"
                            typeahead-min-length="4"
                            typeahead-on-select="vm.onAOISelect($item); selection=''"
                            placeholder="ie. 'Lakewood, CO'" />
                    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>

                    <div class="form-group" ng-show="vm.regionService.regionList.length > 0">
                        <label> Select a State or Regional Study Area</label>
                        <p>You have zoomed in suffiently to select a state or regional study area.  Your selection will dictate the data used to perform basin delination and flow statistics calculation.</p>
                        <div ng-repeat="region in vm.regionService.regionList track by $index">
                            <button ng-class="region.Name === vm.regionService.selectedRegion.Name ? 'btn btn-primary btn-group-justified':'btn btn-group-justified'" ng-click="vm.setRegion(region)"><span>{{region.Name}} </span></button>
                        </div>
                    </div>                          
                </div>    
            </div>   
            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 2  ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(2)" >Identify a Study Area<h5 ng-show="vm.studyAreaService.selectedStudyArea.Features"><strong>Basin Delineated</strong></h5><i ng-class="vm.selectedProcedure == 2 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-show="vm.selectedProcedure == 2">

                    <div ng-hide="vm.studyAreaService.selectedStudyArea.Features">
                        <p><strong>To identify a study area: </strong></p>
                            <div class="alert alert-info" role="alert" ng-hide="vm.studyAreaService.showDelineateButton">Zoom to at least a zoom level of 15 (scale shown in lower left of map)</div>
                            <div class="alert alert-info" role="alert" ng-show="vm.studyAreaService.showDelineateButton">Click the 'Delineate' button, then use your mouse or finger to click or tap a blue stream cell on the map</div>
                        <p ng-show="vm.studyAreaService.selectedStudyArea.Features">Your delineation is complete.  You can now clear your basin, edit your basin, or choose a state or regional study specific funciton (if available).  Click <strong>continue </strong>when you are ready.</p>
                    </div>
              
                    <div class="btn-toolbar" ng-show= "vm.studyAreaService.showDelineateButton"> 
                        <button id="delineateButton" type="button" class="btn btn-sm btn-info" ng-click="vm.startDelineate()" ng-class="vm.studyAreaService.doDelineateFlag ? 'btn-warning' : 'btn-info'" ng-hide="vm.studyAreaService.selectedStudyArea.Features"><i  ng-class="vm.studyAreaService.canUpdate ? 'fa fa-map-marker' : 'fa fa-refresh fa-spin disabled'"></i>&nbsp;&nbsp;<span ng-show="vm.studyAreaService.canUpdate">Delineate</span><span ng-show="!vm.studyAreaService.canUpdate">Delineating Basin, please wait...</span></button>
                     </div>   
                    
                    <div ng-show="vm.studyAreaService.selectedStudyArea.Features">
                        <p>You can now clear or edit the study area, select a state or regional study specific funciton (if available).  Click <strong>continue </strong>when you are ready.</p>
                        
                        <div class="btn-toolbar">
                            <button ng-show="vm.studyAreaService.selectedStudyArea.Features" id="clearDelinationButton" type="button" class="btn btn-sm btn-info" ng-click="vm.resetWorkSpace()" ng-show="vm.studyAreaService.selectedStudyArea.Features"><span><i class="fa fa-trash-o"></i>&nbsp;&nbsp;Clear Delination</span></button>
                            <button type="button" class="btn btn-sm btn-info" ng-click="vm.studyAreaService.showAddRemoveButtons = !vm.studyAreaService.showAddRemoveButtons"><span class="fa fa-edit"></span>&nbsp;&nbsp;Edit Study Area</button>
                        </div>

                        <div class="well well-sm" ng-show="vm.studyAreaService.showAddRemoveButtons">
                            <strong>Editing Tools</strong>
                            <p>To edit your basin, first click the 'Add Area' or 'Remove Area' button below.  Use your mouse or finger to draw a polygon.</p><p>If adding an arean be sure your drawn polygon starts and ends within the yellow basin boundaries</p><p>If removing an area, be sure your drawn polygon starts and ends outside of the yellow basin.</p>
                            <div class="btn-toolbar">
                                <button type="button" class="btn btn-sm btn-success" ng-click="vm.studyAreaService.editBasin('add')"><span class="fa fa-plus-square-o"></span>&nbsp;&nbsp;Add Area</button>
                                <button type="button" class="btn btn-sm btn-warning" ng-click="vm.studyAreaService.editBasin('remove')"><span class="fa fa-minus-square-o"></span>&nbsp;&nbsp;Remove Area</button>
                            </div>
                            <div class="btn-toolbar">
                                <button type="button" class="btn btn-sm btn-primary" ng-click="vm.studyAreaService.undoEdit()"><span class="fa fa-undo"></span>&nbsp;&nbsp;Undo Edits</button>
                            </div>
                        </div> 

                        <div class="well well-sm" style="margin-top:20px;">
                            <strong>State/Region Specific Functions</strong>
                            <p>The following additional functions area available for {{vm.regionService.selectedRegion.Name}}.</p>
                            <div class="form-group">
                                <button ng-show="vm.regionService.selectedRegion.RegionID == 'CO'" ng-click="vm.checkRegulation()" type="button" class="btn btn-sm btn-primary"><i ng-class="vm.studyAreaService.regulationCheckComplete ? 'fa fa-flash' : 'fa fa-refresh fa-spin'"></i>&nbsp;&nbsp;Check for upstream regulation</button>
                            </div>

                            <div class="alert alert-success" role="alert" ng-show="vm.studyAreaService.isRegulated !== null">Upstream Regulation check has been completed.  There is <strong ng-show="vm.studyAreaService.isRegulated" >{{vm.studyAreaService.regulationCheckResults.percentarearegulated.toFixed(2)}} percent</strong><strong ng-show="!vm.studyAreaService.isRegulated">NO</strong> regulation in this watershed.</div>

                        </div> 
                        
                        <div class="btn-toolbar">
                            <button type="button" class="btn btn-sm btn-success" ng-click="vm.checkForBasinEdits()"><span class="fa fa-check-circle"></span>&nbsp;&nbsp;Continue</button>
                        </div> 
                    </div>                            
                </div>    
            </div> 
            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 3  ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(3)" >Select Scenarios<h5 ng-show="vm.studyAreaService.parametersLoading"><strong>Basin Characteristics Loaded</strong></h5><i ng-class="vm.selectedProcedure == 3 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-show="vm.selectedProcedure == 3">

                    <div class="well well-sm">
                        <h4>Scenarios</h4>
                        <p>Choosing a scenario below will select the associated parameters necessary to calculate that scenario</p>
                        <div class="alert alert-info" role="alert" ng-show="vm.nssService.loadingStatisticsGroup">Loading Scenarios...</div>
                        <div class="alert alert-info" role="alert" ng-show="vm.nssService.statisticsGroupList.length == 0 && !vm.nssService.loadingStatisticsGroup">No Statistic Groups Available</div>
                        <div class="form-group" ng-if="vm.nssService.statisticsGroupList.length > 0">
                            <button class="btn btn-sm btn-default" ng-class="vm.nssService.selectedStatisticsGroup == statisticsGroup ? 'btn-success': ''" ng-click="vm.setStatisticsGroup(statisticsGroup)" ng-repeat="statisticsGroup in vm.nssService.statisticsGroupList"><span>{{statisticsGroup.Name}} </span></button>
                        </div>
                    </div>

                    <div class="well well-sm">
                        <h4>Basin Characteristics</h4>
                        <p>Basin Characteristics can be selected individually or are selected based on the chosen scenario.  Some characteristics are calculated by default and cannot be unselected.</p>
                        <div class="list-group">

                            <div class="btn-toolbar">
                                <button class="btn btn-default" ng-click="vm.multipleParameterSelector()"><span ng-show="vm.multipleParameterSelectorAdd"><i class="fa fa-check-square-o"></i>&nbsp;&nbsp;Select All</span><span ng-hide="vm.multipleParameterSelectorAdd"><i class="fa fa-square-o"></i>&nbsp;&nbsp;Deselect All</span></button>
                            </div>

                            <form ng-repeat="parameter in vm.regionService.parameterList">
                                <checkbox large ng-model="parameter.checked" ng-change="vm.updateStudyAreaParameterList(parameter)"></checkbox><span>&nbsp;&nbsp;{{parameter.description}}</span>
                            </form>
                            
                        </div>
                        <div ng-show="vm.studyAreaService.studyAreaParameterList.length > 0">
                            <div class="form-group">
                                <button type="button" class="btn btn-sm btn-primary" ng-click="vm.calculateParameters()"><i class="fa fa-refresh" ng-class="vm.studyAreaService.parametersLoading ? 'fa fa-refresh fa-spin' : 'fa fa-flash'"></i>&nbsp;&nbsp;Calculate Basin Characteristics</button>
                            </div>
                            <div class="alert alert-success" role="alert" ng-show="vm.studyAreaService.parametersLoaded">Your basin characteristics have been loaded, you can choose "<strong>Modify Basin Characteristics</strong>" or go straight to "<strong>Build a Flow Report</strong>"</div>
                        </div>
                    </div>                       
                </div>    
            </div>    
            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 4  ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(4)" >Modify Basin Characteristics<i ng-class="vm.selectedProcedure == 4 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-show="vm.selectedProcedure == 4">
                    <p>Basin Characteristics can be edited here</p>
                    <table class="table table-condensed">
                      <thead class="param-table">
                        <tr>
                            <th>Parameter</th>
                            <th ng-hide="vm.studyAreaService.isRegulated">Value</th> 
                            <th ng-show="vm.studyAreaService.isRegulated">Unregulated</th>
                            <th ng-show="vm.studyAreaService.isRegulated">Regulated</th>
                        </tr>
                      </thead>
                      <tbody>
                          <tr ng-repeat="parameter in vm.studyAreaService.studyAreaParameterList">
                            <td ng-bind="parameter.name"></td>
                            <td ng-hide="vm.studyAreaService.isRegulated"><input class="form-control" ng-model="parameter.value" type="text"/></td>
                            <td ng-show="vm.studyAreaService.isRegulated"><input class="form-control" ng-model="parameter.unRegulatedValue" type="text"/></td>
                            <td ng-show="vm.studyAreaService.isRegulated"><input class="form-control" ng-model="parameter.regulatedValue" type="text"/></td>
                          </tr>
                        </tbody>
                    </table>                       
                </div>    
            </div>  
            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 5  ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(5)" >Build a Report<h5 ng-show="vm.nssService.selectedStatisticsGroupScenarioResults.length > 0"><strong>Report Built</strong></h5><i ng-class="vm.selectedProcedure == 5 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-show="vm.selectedProcedure == 5">
                    <p>Click the button below to generate a report: {{vm.nssService.selectedStatisticsGroup.Name}}</p>


                    <div class="form-group" ng-show="vm.studyAreaService.parametersLoaded" ng-click="vm.nssService.showBasinCharacteristicsTable = !vm.nssService.showBasinCharacteristicsTable">
                        <button type="button" class="btn btn-sm" ng-class="vm.nssService.showBasinCharacteristicsTable ? 'btn-primary' : 'btn-default'"><i></i>Show Basin Characteristics</button>
                    </div>
                    <div class="form-group" ng-show="vm.nssService.selectedStatisticsGroup" ng-click="vm.nssService.showFlowsTable = !vm.nssService.showFlowsTable">
                        <button type="button" class="btn btn-sm" ng-class="vm.nssService.showFlowsTable ? 'btn-primary' : 'btn-default'"><i></i>Estimate Flows</button>
                    </div>

                    <form >
                        <checkbox large ng-model="vm.nssService.showBasinCharacteristicsTable" ng-show="vm.studyAreaService.parametersLoaded"></checkbox><span>&nbsp;&nbsp;Show Basin Characteristics</span>
                        <checkbox large ng-model="vm.nssService.showFlowsTable" ng-show="vm.nssService.selectedStatisticsGroup"></checkbox><span>&nbsp;&nbsp;Estimate Flows</span>
                    </form>


                    <div class="form-group" ng-show="vm.nssService.showBasinCharacteristicsTable || vm.nssService.showFlowsTable">
                        <button ng-click="vm.generateReport()" type="button" class="btn btn-sm btn-success"><i ng-class="vm.nssService.canUpdate ? 'fa fa-flash' : 'fa fa-refresh fa-spin'"></i>&nbsp;&nbsp;Generate Report</button>
                    </div>


                </div>    
            </div>       
        </div>

        <div class="identification pull-right">powered by <a href="http://wim.usgs.gov/" target="_blank">WiM</a></div>
    </div>
</div>