
<table class="table borderless">

    <thead>
        <tr ng-click="vm.toggleSideBar()">
            <th><a href="" role="tab"><i id="chevron" ng-class="vm.sideBarCollapsed ? 'glyphicon glyphicon-chevron-right': 'glyphicon glyphicon-chevron-left'"></i></a></th>
            <th style="min-width:18em;"><i class="glyphicon glyphicon-thumbs-up"></i><span>&nbsp;&nbspStreamStats <small></small></span></th>
        </tr>
    </thead>

    <tbody>
        <!--  step 1 Select a State/Region -->
        <tr ng-click="vm.setProcedureType(1)" ng-class="vm.selectedProcedure == 1 ? 'activeitemheader accordion-toggle': 'accordion-toggle'">
            <td><a href="" role="tab"><span class="label label-default">1</span></a></td>
            <td><a href="#"><span class="step-label">&nbsp;Select a State / Region</span></a></td>
        </tr>
        <tr ng-hide="vm.selectedProcedure != 1 || vm.sideBarCollapsed" class="activeitem">
            <td></td>
            <td colspan="12" class="activeitem">
                <div class="accordion-body">
                    <p>To begin: use the map zoom to and select a region, or use the location search.</p>

                    <input type="text" class="form-control"
                           ng-model="selection"
                           typeahead="loc as loc.Name +'(' + loc.State +')' for loc in vm.getLocations($viewValue)"
                           typeahead-loading="loadingLocations"
                           typeahead-wait-ms="100"
                           typeahead-min-length="4"
                           typeahead-on-select="vm.onAOISelect($item); selection=''"
                           placeholder="Location search" />
                    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>

                    <div class="form-group" ng-show="vm.regionList.length > 0">
                        <label> Select a Region</label>
                        <div ng-repeat="region in vm.regionList track by $index">
                            <button ng-class="region.Name === vm.regionService.selectedRegion.Name ? 'btn btn-primary btn-group-justified':'btn btn-group-justified'" ng-click="vm.setRegion(region)"><span>{{region.Name}} </span></button>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
        <!-- step 2 Identify a Study Area -->
        <tr ng-click="vm.setProcedureType(2)" ng-class="vm.selectedProcedure == 2 ? 'activeitemheader accordion-toggle': 'accordion-toggle'">
            <td><a href="#"><span class="label label-default">2</span></a></td>
            <td><a href="#"><span class="step-label">&nbsp;Identify a Study Area</span></a></td>
        </tr>
        <tr ng-hide="vm.selectedProcedure != 2 || vm.sideBarCollapsed" class="activeitem">
            <td></td>
            <td colspan="6">
                <div class="accordion-body">
                    <p>Zoom to at least a zoom level of 15, click the 'delineate' button, then select a blue stream cell</p>
                     
                    <button id="delineateButton" type="button" class="btn btn-sm btn-info" ng-click="vm.setDelineateFlag()" ng-class="vm.studyAreaService.doDelineateFlag ? 'btn-warning' : 'btn-info'"><span class="glyphicon glyphicon-edit"></span>Delineate</button>
                    <i id="loadingSpinner" class="fa fa-spinner fa-5x fa-spin" ng-show="!vm.studyAreaService.canUpdate"></i>  

                    <div id="verifyStudyArea" style="display:none;">
                        <br><p> Does the study area look correct?</p>
                        <div class="btn-group">
                            <button id="editButton" type="button" class="btn btn-sm btn-info"><span class="glyphicon glyphicon-edit"></span> Edit</button>
                            <button id="undoButton" type="button" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-trash"></span> Clear</button>
                            <button id="saveChangesButton" type="button" class="btn btn-sm btn-success"><span class="glyphicon glyphicon-ok"></span> Accept</button>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
        <!--  step 3 Select a Scenario -->
        <tr ng-click="vm.setProcedureType(3)" ng-class="vm.selectedProcedure == 3 ? 'activeitemheader accordion-toggle': 'accordion-toggle'">
            <td><a href="#"><span class="label label-default">3</span></a></td>
            <td><a href="#"><span class="step-label">&nbsp;Select Scenarios</span></a></td>
        </tr>
        <tr ng-hide="vm.selectedProcedure != 3 || vm.sideBarCollapsed" class="activeitem">
            <td></td>
            <td colspan="6">

                <div class="accordion-body">
                    
                    <div class="btn-group" dropdown is-open="status.isopen">
                      <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle ng-disabled="disabled">
                        Select a Scenario <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                        <li ng-repeat="scenario in vm.nssService.scenarioList" ng-click="vm.setScenario(scenario)" ng-class="vm.nssService.selectedScenario == scenario ? 'active': ''">
                          <a href="#">{{scenario.Description}}</a>
                        </li>
                      </ul>
                    </div>
                        <!--<button ng-repeat="scenario in vm.nssService.scenarioList" type="button" class="btn btn-sm btn-primary" ng-click="vm.setScenario(scenario)">{{scenario.Description}}</button>
                        <h5>Selected scenario</h5>
                        <pre style="width:300px;" ng-bind="vm.nssService.selectedScenario.ModelType | json"></pre>-->

                    <h4>Parameters</h4>

                    <div class="checkboxList">
                        <div ng-repeat="parameter in vm.regionService.parameterList">
                            <input type="checkbox" ng-checked="vm.studyAreaService.studyAreaParameterList.indexOf(parameter) > -1 " ng-click="vm.updateStudyAreaParameterList(parameter)"/>  
                            <label tooltip="{{parameter.description}}">{{parameter.name}}</label>
                        </div>
                    </div>
                    <div ng-show="vm.studyAreaService.studyAreaParameterList.length > 0">
                        <button type="button" class="btn btn-sm btn-primary" ng-click="vm.studyAreaService.loadParameters()">Calculate Parameters</button>   
                        <pre style="width:300px;" ng-bind="vm.studyAreaService.studyAreaParameterList | json"></pre>
                    </div>
                </div>
            </td>
        </tr>
        <!-- step 4 Refine Parameters -->
        <tr ng-click="vm.setProcedureType(4)" ng-class="vm.selectedProcedure == '4' ? 'activeitemheader accordion-toggle': 'accordion-toggle'">
            <td><a href="#" role="tab"><span class="label label-default">4</span></a></td>
            <td><a href="#"><span class="step-label">&nbsp;Refine Parameters</span></a></td>
        </tr>
        <tr ng-hide="vm.selectedProcedure != 4 || vm.sideBarCollapsed" class="activeitem">
            <td></td>
            <td colspan="6">
                <p>Refine parameters by editing fields.</p>
                <div ng-repeat="parameter in vm.studyAreaService.studyAreaParameterList">
                    <div class="input-group">
                        <span class="input-group-addon btn-group-justified" ng-bind="parameter.name"></span>
                        <input class="form-control" ng-model="parameter.value" type="text"/>
                    </div>
                    <!--<span class="glyphicon glyphicon-warning-sign" style="color: red" data-bind='fadeVisible: value.hasWarning(), text: value.validationMessage()'></span>
                    <div class="alert alert-danger" style="padding:6px;font-size:10px;" role="alert" ng-bind="fadeVisible: value.hasWarning()">
                        <i class="glyphicon glyphicon-warning-sign"></i><span ng-bind='text: value.validationMessage()'></span>
                    </div>-->
                </div>
            </td>
        </tr>
        <!-- step 5 Build a Flow Report -->
        <tr ng-click="vm.setProcedureType(5)" ng-class="vm.selectedProcedure == 5 ? 'activeitemheader accordion-toggle': 'accordion-toggle'">
            <td><a href="#"><span class="label label-default">5</span></a></td>
            <td><a href="#"><span class="step-label">&nbsp;Build a Flow Report</span></a></td>
        </tr>
        <tr ng-hide="vm.selectedProcedure != 5 || vm.sideBarCollapsed" class="activeitem">
            <td></td>
            <td colspan="6">
                <div class="accordion-body">
                    <p>Select/Enter a start date and end date then select compute to generate flow report</p>
                    <hr class="headerUnderline" />
                    <!-- Split button -->
                    <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-primary" data-bind="text:SelectedModel().SelectedReferenceGage().StationID"></button>
                        <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <a style="padding:0.5em" data-bind="text: SelectedModel().SelectedReferenceGage().Name, attr:{href:SelectedModel().SelectedReferenceGage().URL }"></a>
                        <ul class="dropdown-menu" role="menu" data-bind="foreach: SelectedModel().ReferenceGageList">
                            <li><a href="#" data-bind="event:{click: $root.SelectedModel().SetReferenceGage($data)},text: Name"></a></li>
                        </ul>
                    </div>
                    <br />
                    <br />
                    <input class="form-control" placeholder="Select a Start Date" type="text" name="start" data-bind="datepicker: SelectedModel().StartDate, datepickerOptions: { startDate: SelectedModel().MinDateRange(), autoclose: true, todayHighlight:true, endDate: SelectedModel().MaxDateRange()}" />
                    <input class="form-control" placeholder="Select a End Date" type="text" name="end" data-bind="datepicker: SelectedModel().EndDate, datepickerOptions: { startDate: SelectedModel().MinDateRange(), autoclose: true, todayHighlight:true, endDate: SelectedModel().MaxDateRange()}" />
                    <br>
                    <button id="computeFlowButton" type="button" class="btn btn-sm btn-success" data-bind="event: {click: Compute()}"><span class="glyphicon glyphicon-ok"></span> Compute Flow</button>

                </div>
            </td>
        </tr>
    </tbody>
</table>




