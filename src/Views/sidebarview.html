<div class="scrollable sidebar-content">
    <div class="scrollable-content">
        <div class="list-group">
            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 1  ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(1)" >Select a State / Region<h5 ng-show="vm.regionService.selectedRegion.Name"><strong>{{vm.regionService.selectedRegion.Name}}</strong></h5><i ng-class="vm.selectedProcedure == 1 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-hide="vm.selectedProcedure != 1">
                    <div class="alert alert-info" role="alert">
                        <p>To begin, a state or regional study area needs to be selected.  This can be accomplished in the following ways:</p>
                        <ul>
                            <li>Click a state or region on the map</li>
                            <li>Zoom using the map until state and regional study areas are displayed below</li>
                            <li>Use the search box to zoom to an area of interest, then select a search option from the list</li>
                        </ul>
                    </div>

                    <div class="row search-bar">
                      <div class="col-md-9 search-bar"><div id="sapi_searchTextBoxDiv">Loading Search Bar...</div></div>
                      <div class="col-md-2 search-bar"><button class="btn btn-info" ng-click="vm.showSearchHelp = !vm.showSearchHelp"><i class="fa fa-question-circle"></i></button></div>
                    </div>

                    <div ng-init="vm.showSearchHelp = false" ng-show="vm.showSearchHelp">
                        <p><strong>Supported search strings: </strong><p>
                        <div class="alert alert-info" role="alert">
                            <ul>
                                <li>GNIS locations</li>
                                <li>USGS Sites</li>
                                <li>Zip Codes</li>
                                <li>Area Codes</li>
                                <li>States</li>
                                <li>Lat/Long (ie. '43.9,-72.1')</li>
                                <li>Street Address</li>
                            </ul>
                        </div>
                    </div>

                    <!--
                    <input type="text" class="form-control"
                            ng-model="selection"
                            typeahead="loc as loc.Name +'(' + loc.State +')' for loc in vm.getLocations($viewValue)"
                            typeahead-loading="loadingLocations"
                            typeahead-wait-ms="100"
                            typeahead-min-length="4"
                            typeahead-on-select="vm.onAOISelect($item); selection=''"
                            placeholder="ie. 'Lakewood, CO'" />
                    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                        -->

                    <div class="form-group" ng-show="vm.regionService.regionList.length > 0">
                        <label> Select a State or Regional Study Area</label>
                        <p>You have zoomed in suffiently to select a state or regional study area.  Your selection will dictate the data used to perform basin delination and flow statistics calculation.</p>
                        <div ng-repeat="region in vm.regionService.regionList track by $index">
                            <button ng-class="region.Name === vm.regionService.selectedRegion.Name ? 'btn btn-info btn-group-justified':'btn btn-group-justified'" ng-click="vm.setRegion(region)"><span>{{region.Name}} </span></button>
                        </div>
                    </div>       
                    <div class="form-group" ng-show="vm.regionService.regionList.length < 0">
                        <div class="alert alert-info" role="alert"></div>
                    </div>                      
                </div>    
            </div>   
            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 2  ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(2)" >Identify a Study Area<h5 ng-show="vm.studyAreaService.selectedStudyArea.Features"><strong>Basin Delineated</strong></h5><i ng-class="vm.selectedProcedure == 2 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-show="vm.selectedProcedure == 2">

                    <div ng-hide="vm.studyAreaService.selectedStudyArea.Features || !vm.regionService.streamStatsAvailable">
                         <div class="alert alert-info" role="alert" ng-hide="vm.studyAreaService.showDelineateButton">Zoom to at least a zoom level of 15 (scale shown in lower left of map)</div>
                        <div class="alert alert-info" role="alert" ng-show="vm.studyAreaService.showDelineateButton">Click the 'Delineate' button, then use your mouse or finger to click or tap a blue stream cell on the map</div>
                    </div>

                    <div class="alert alert-warning" role="alert" ng-hide="vm.regionService.streamStatsAvailable">StreamStats is not available here at this time</div>

                    <div class="btn-toolbar" ng-show= "vm.studyAreaService.showDelineateButton"> 
                        <button id="delineateButton" type="button" class="btn btn-sm btn-info" ng-click="vm.startDelineate()" ng-class="vm.studyAreaService.doDelineateFlag ? 'btn-warning' : 'btn-info'" ng-hide="vm.studyAreaService.selectedStudyArea.Features" ng-disabled="!vm.studyAreaService.canUpdate || vm.studyAreaService.checkingDelineatedPoint"><i  ng-class="vm.studyAreaService.canUpdate || vm.studyAreaService.checkingDelineatedPoint ? 'fa fa-map-marker' : 'fa fa-refresh fa-spin'"></i>&nbsp;&nbsp;<span ng-show="vm.studyAreaService.canUpdate">Delineate</span><span ng-show="!vm.studyAreaService.canUpdate">Delineating Basin, please wait...</span></button>
                     </div>    

                    <div class="btn-toolbar" ng-show="vm.studyAreaService.selectedStudyArea.Features && !vm.studyAreaService.regressionRegionQueryComplete"> 
                        <button type="button" class="btn btn-sm btn-info" ng-click="vm.studyAreaService.queryRegressionRegions()" ng-disabled="vm.studyAreaService.regressionRegionQueryLoading"><span ng-show="vm.studyAreaService.regressionRegionQueryLoading"><i ng-class="vm.studyAreaService.regressionRegionQueryLoading ? 'fa fa-refresh fa-spin' : ''"></i>&nbsp;&nbsp;Querying Regression Regions</span><span ng-show="!vm.studyAreaService.regressionRegionQueryLoading && !vm.studyAreaService.regressionRegionQueryComplete"><i class="fa fa-refresh"></i>&nbsp;&nbsp;Re-query Regression Regions</span></button>
                    </div>
                    
                    <div ng-show="vm.studyAreaService.regressionRegionQueryComplete">

                        <div class="alert alert-info" role="alert">
                            <p>Your delineation is complete.  You can now clear your basin, edit your basin, or choose a state or regional study specific funciton (if available).  Click <strong>continue </strong>when you are ready.</p>
                        </div>

                        <div class="btn-toolbar" ng-hide="vm.studyAreaService.showEditToolbar">
                            <button id="clearDelinationButton" type="button" class="btn btn-sm btn-info" ng-click="vm.resetWorkSpace()" ng-show="vm.studyAreaService.selectedStudyArea.Features"><span><i class="fa fa-trash-o"></i>&nbsp;&nbsp;Clear Basin</span></button>
                            <button type="button" class="btn btn-sm btn-info" ng-click="vm.studyAreaService.showEditToolbar = !vm.studyAreaService.showEditToolbar"><span class="fa fa-edit"></span>&nbsp;&nbsp;Edit Basin</button>
                            <button type="button" class="btn btn-sm btn-success" ng-click="vm.selectScenarios()"><span class="fa fa-check-circle"></span>&nbsp;&nbsp;Continue</button>
                        </div>

                        <div class="well well-sm" ng-show="vm.studyAreaService.showEditToolbar">
                            <p>To edit your basin, first click the 'Add Area' or 'Remove Area' button below.  Use your mouse or finger to draw a polygon.</p><p>If <strong>adding</strong> an area be sure your drawn polygon starts and ends within the yellow basin boundaries</p><p>If <strong>removing</strong> an area, be sure your drawn polygon starts and ends outside of the yellow basin.</p>
                            <div class="btn-toolbar">
                                <button type="button" class="btn btn-sm btn-info" ng-click="vm.studyAreaService.editBasin('add')"><span class="fa fa-plus-square-o"></span>&nbsp;&nbsp;Add Area</button>
                                <button type="button" class="btn btn-sm btn-info" ng-click="vm.studyAreaService.editBasin('remove')"><span class="fa fa-minus-square-o"></span>&nbsp;&nbsp;Remove Area</button>
                            </div>
                            <div class="btn-toolbar">
                                <button type="button" class="btn btn-sm btn-warning" ng-click="vm.studyAreaService.undoEdit()"><span class="fa fa-undo"></span>&nbsp;&nbsp;Undo Edits</button>
                                <button type="button" class="btn btn-sm btn-success" ng-click="vm.submitBasinEdits()"><span class="fa fa-check"></span>&nbsp;&nbsp;Finished Editing</button>
                            </div>
                        </div> 

                        <div class="well well-sm" ng-show="vm.regionService.selectedRegion.Applications.indexOf('Regulation') != -1">
                            <strong>State/Region Specific Functions</strong>
                            <p>The following additional functions area available for {{vm.regionService.selectedRegion.Name}}.</p>
                            <div class="form-group">
                                <button  ng-click="vm.checkRegulation()" type="button" class="btn btn-sm btn-info" ng-disabled="!vm.studyAreaService.regulationCheckComplete"><i ng-class="vm.studyAreaService.regulationCheckComplete ? 'fa fa-flash' : 'fa fa-refresh fa-spin'"></i>&nbsp;&nbsp;Check for upstream regulation</button>
                            </div>

                            <div class="alert alert-success" role="alert" ng-show="vm.studyAreaService.isRegulated !== null">Upstream Regulation check has been completed.  There is <strong ng-show="vm.studyAreaService.isRegulated" >{{vm.studyAreaService.regulationCheckResults.percentarearegulated.toFixed(2)}} percent</strong><strong ng-show="!vm.studyAreaService.isRegulated">NO</strong> regulation in this watershed.</div>
                        </div> 
                        
                    </div>                            
                </div>    
            </div> 

            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 3  ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(3)" >Select Scenarios<h5 ng-show="vm.studyAreaService.parametersLoaded"><strong>Basin Characteristics Calculated</strong></h5><i ng-class="vm.selectedProcedure == 3 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-show="vm.selectedProcedure == 3">

                    <div class="alert alert-info" role="alert">Select a scenario below, or expand the "Show Basin Characteristics" button to select specific basin characteristics. Next, click "Calculate Basin Characterstics" to continue.</div>

                    <div class="well well-sm">
                        <h5>Regression Based Scenarios</h5>
                        <div class="alert alert-info" role="alert" ng-show="vm.nssService.statisticsGroupList.length == 0 && !vm.nssService.loadingStatisticsGroup || vm.nssService.loadingStatisticsGroup">Failed to load scenarios or no scenarios available</div>

                        <div class="btn-toolbar" ng-if="vm.nssService.statisticsGroupList.length > 0">
                            <button class="btn btn-sm btn-default" ng-class="vm.checkArrayForObj(vm.nssService.selectedStatisticsGroupList, statisticsGroup) != -1 ? 'btn-info': ''" ng-click="vm.setStatisticsGroup(statisticsGroup)" ng-repeat="statisticsGroup in vm.nssService.statisticsGroupList"><span>{{statisticsGroup.Name}} </span></button>
                        </div>
                    </div>
                    <div class="well well-sm">
                        <h5>Other Scenarios</h5>
                        <div class="btn-toolbar">
                            <button class="btn btn-sm btn-default" ng-class="vm.multipleParameterSelectorAdd ? '': 'btn-info'" ng-click="vm.multipleParameterSelector()"><span>Select All Basin Characteristics</span></button>
                        </div>
                    </div>

                    <div class="well well-sm">
                        <h5>Basin Characteristics</h5>
                        <div class="btn-toolbar">
                            <button class="btn btn-sm btn-default" ng-click="vm.showBasinCharacterstics = !vm.showBasinCharacterstics"><span ng-hide="vm.showBasinCharacterstics"><i class="fa fa-chevron-down"></i>&nbsp;&nbsp;Show Basin Characteristics</span><span ng-show="vm.showBasinCharacterstics"><i class="fa fa-chevron-up"></i>&nbsp;&nbsp;Hide Basin Characteristics</span></button>
                        </div>
                        <div ng-init="vm.showBasinCharacterstics = false" ng-show="vm.showBasinCharacterstics">
                            <table class="table table-condensed">
                                <tbody ng-repeat="parameter in vm.regionService.parameterList">
                                    <tr>
                                        <td><checkbox large ng-model="parameter.checked" ng-change="vm.updateStudyAreaParameterList(parameter)"></checkbox></td>
                                        <td><span>&nbsp;&nbsp;{{parameter.code}}</span></td>
                                        <td><span>&nbsp;&nbsp;{{parameter.description}}</span></td>
                                    </tr>
                                </tbody>
                            </table>  
                        </div>
                    </div>

                    <div class="btn-toolbar">
                        <button type="button" class="btn btn-sm btn-success" ng-click="vm.calculateParameters()" ng-disabled="vm.studyAreaService.parametersLoading"><i class="fa fa-refresh" ng-class="vm.studyAreaService.parametersLoading ? 'fa fa-refresh fa-spin' : 'fa fa-flash'"></i>&nbsp;&nbsp;Calculate Selected Basin Characteristics</button>
                    </div>                  
                </div>    
            </div>    

            <div class="sidebar-item">
                <a ng-class="vm.selectedProcedure == 4 ? 'list-group-item-active': 'list-group-item'" ng-click="vm.setProcedureType(4)" >Build a Report<h5 ng-show="vm.studyAreaService.reportGenerated"><strong>Report Built</strong></h5><i ng-class="vm.selectedProcedure == 4 ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-show="vm.selectedProcedure == 4">
                    <div class="alert alert-info" role="alert" >You can modify computed basin characteristics here, then select the types of reports you wish to generate.  Then click the "Generate Report" button</div>

                    <div class="btn-toolbar">
                        <button class="btn btn-sm btn-default" ng-click="vm.showModifyBasinCharacterstics = !vm.showModifyBasinCharacterstics"><span ng-hide="vm.showModifyBasinCharacterstics "><i class="fa fa-chevron-down"></i>&nbsp;&nbsp;Show Modify Basin Characteristics</span><span ng-show="vm.showModifyBasinCharacterstics "><i class="fa fa-chevron-up"></i>&nbsp;&nbsp;Hide Modify Basin Characteristics</span></button>
                    </div>

                    <div class="well well-sm" ng-init="vm.showModifyBasinCharacterstics = false" ng-show="vm.showModifyBasinCharacterstics">
                        <p>Basin Characteristics can be edited here</p>
                        <table class="table table-condensed">
                            <thead class="param-table">
                            <tr>
                                <th>Parameter</th>
                                <th ng-hide="vm.studyAreaService.isRegulated">Value</th> 
                                <th ng-show="vm.studyAreaService.isRegulated">Unregulated</th>
                                <th ng-show="vm.studyAreaService.isRegulated">Regulated</th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="parameter in vm.studyAreaService.studyAreaParameterList">
                                <td ng-bind="parameter.name"></td>
                                <td ng-hide="vm.studyAreaService.isRegulated"><input class="form-control" ng-model="parameter.value" type="text"/></td>
                                <td ng-show="vm.studyAreaService.isRegulated"><input class="form-control" ng-model="parameter.unRegulatedValue" type="text"/></td>
                                <td ng-show="vm.studyAreaService.isRegulated"><input class="form-control" ng-model="parameter.regulatedValue" type="text"/></td>
                                </tr>
                            </tbody>
                        </table>                       
                    </div>

                    <div class="well well-sm">
                        <p>Select available reports to display:</p>
                        <form ng-init="vm.nssService.showBasinCharacteristicsTable = true" ng-show="vm.studyAreaService.parametersLoaded">
                            <checkbox large ng-model="vm.nssService.showBasinCharacteristicsTable" ></checkbox><span>&nbsp;&nbsp;Basin Characteristics Report</span>
                        </form>
                        <form ng-show="vm.nssService.selectedStatisticsGroupList.length > 0">
                            <checkbox large ng-model="vm.nssService.showFlowsTable" ></checkbox><span>&nbsp;&nbsp;Scenario Flow Reports</span>
                        </form>


                        <div class="form-group" ng-show="vm.nssService.showBasinCharacteristicsTable || vm.nssService.showFlowsTable">
                            <button ng-click="vm.generateReport()" type="button" class="btn btn-sm btn-success"><i ng-class="vm.nssService.canUpdate ? 'fa fa-flash' : 'fa fa-refresh fa-spin'"></i>&nbsp;&nbsp;Build Report</button>
                        </div>
                    </div>
                </div>    
            </div>  
            <div class="sidebar-item">
                <a ng-class="vm.showExplorationTools ? 'list-group-item-active': 'list-group-item exploration-tools'" ng-click="vm.showExplorationTools = !vm.showExplorationTools" ng-init="vm.showExplorationTools = false" >Exploration Tools<i ng-class="vm.showExplorationTools ? 'fa fa-chevron-right pull-right': 'fa fa-chevron-down pull-right'"></i></a>

                <div class="list-group-body" ng-show="vm.showExplorationTools">
                    <div class="alert alert-info" role="alert" >Tools that can be used outside of the main workflow</div>

                    <div class="btn-toolbar">
                        <button ng-disabled="!vm.regionService.selectedRegion" ng-class="!vm.regionService.allowRegionalQuery ? 'btn btn-sm btn-default':'btn btn-sm btn-success'" ng-click="vm.regionService.allowRegionalQuery = !vm.regionService.allowRegionalQuery" ng-init="vm.regionService.allowRegionalQuery = false"><span><i class="fa fa-info-circle"></i>&nbsp;&nbsp;Query State/Regional Layers</span></button>
                        <button ng-class="!vm.explorationService.drawElevationProfile ? 'btn btn-sm btn-default':'btn btn-sm btn-success'" ng-click="vm.explorationService.drawElevationProfile = !vm.explorationService.drawElevationProfile"><span><i class="fa fa-line-chart"></i>&nbsp;&nbsp;Elevation Profile Tool</span></button>
                        <button ng-class="!vm.explorationService.drawMeasurement ? 'btn btn-sm btn-default':'btn btn-sm btn-success'" ng-click="vm.explorationService.drawMeasurement = !vm.explorationService.drawMeasurement"><span><i class="fa fa-arrows-h"></i>&nbsp;&nbsp;Measure Tool</span></button>
                        
                    </div>
                    <div class="alert alert-info" role="alert" ng-show="vm.explorationService.measurementData.length > 0">
                        <span ng-bind="vm.explorationService.measurementData"></span>
                    </div>
                </div>    
            </div>       
        </div>

        <div class="identification pull-right">powered by <a href="http://wim.usgs.gov/" target="_blank">WiM</a></div>
    </div>
</div>